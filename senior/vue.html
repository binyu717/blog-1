<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>君の名は | 推荐</title>
    <meta name="description" content="自从进入前端圈子以来，记录的一些自己所经历过的技术栈。">
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
    
    <link rel="preload" href="/blog/assets/css/17.styles.bc9563bd.css" as="style"><link rel="preload" href="/blog/assets/js/app.09674728.js" as="script"><link rel="preload" href="/blog/assets/js/0.ea1d744c.js" as="script"><link rel="prefetch" href="/blog/assets/js/9.f0110357.js"><link rel="prefetch" href="/blog/assets/js/1.9a4a2242.js"><link rel="prefetch" href="/blog/assets/js/2.55b7bd30.js"><link rel="prefetch" href="/blog/assets/js/3.160db79f.js"><link rel="prefetch" href="/blog/assets/js/4.a06dd90f.js"><link rel="prefetch" href="/blog/assets/js/5.ebf08a72.js"><link rel="prefetch" href="/blog/assets/js/6.6a4cd8c5.js"><link rel="prefetch" href="/blog/assets/js/7.ca5d4189.js"><link rel="prefetch" href="/blog/assets/js/8.a29329e9.js"><link rel="prefetch" href="/blog/assets/js/10.92965d31.js"><link rel="prefetch" href="/blog/assets/js/11.8c2440fe.js"><link rel="prefetch" href="/blog/assets/js/12.e9f12236.js"><link rel="prefetch" href="/blog/assets/js/13.06813c9c.js"><link rel="prefetch" href="/blog/assets/js/14.239e09a3.js"><link rel="prefetch" href="/blog/assets/js/15.0997a2cf.js"><link rel="prefetch" href="/blog/assets/js/16.3e88b360.js">
    <link rel="stylesheet" href="/blog/assets/css/17.styles.bc9563bd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/blog/" class="home-link router-link-active"><!----><span class="site-name">
      君の名は
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="http://caibaojian.com/vuepress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://caibaojian.com/vuepress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vuepress
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>基础</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>高级</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/blog/senior/jquery.html" class="sidebar-link">所见所闻之jquery</a></li><li><a href="/blog/senior/vue.html" class="active sidebar-link">所见所闻之vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/senior/vue.html#推荐" class="sidebar-link">推荐</a></li><li class="sidebar-sub-header"><a href="/blog/senior/vue.html#简介" class="sidebar-link">简介</a></li><li class="sidebar-sub-header"><a href="/blog/senior/vue.html#常用api" class="sidebar-link">常用api</a></li><li class="sidebar-sub-header"><a href="/blog/senior/vue.html#项目构建" class="sidebar-link">项目构建</a></li><li class="sidebar-sub-header"><a href="/blog/senior/vue.html#原理-2-5-16" class="sidebar-link">原理(2.5.16)</a></li><li class="sidebar-sub-header"><a href="/blog/senior/vue.html#bug" class="sidebar-link">bug</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h2 id="推荐"><a href="#推荐" aria-hidden="true" class="header-anchor">#</a> 推荐</h2><h3 id="文档"><a href="#文档" aria-hidden="true" class="header-anchor">#</a> 文档</h3><ul><li><a href="http://cn.vuejs.org/" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://router.vuejs.org/zh/guide/#html" target="_blank" rel="noopener noreferrer">vue-router<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://vuex.vuejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">vuex<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://github.com/opendigg/awesome-github-vue" target="_blank" rel="noopener noreferrer">vue开源项目<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://github.com/youngwind/blog" target="_blank" rel="noopener noreferrer">梁少峰Vue源码解析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://github.com/DDFE/DDFE-blog" target="_blank" rel="noopener noreferrer">滴滴Vue源码解析<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://ustbhuangyi.github.io/vue-analysis/" target="_blank" rel="noopener noreferrer">滴滴vue技术揭秘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="http://www.cnblogs.com/xuntu/p/6800547.html" target="_blank" rel="noopener noreferrer">Vue虚拟DOM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://github.com/wangfupeng1988/learn-vue2-mvvm" target="_blank" rel="noopener noreferrer">Vue2的MVVM<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li><li><a href="https://juejin.im/post/5a8e3f00f265da4e747fc700" target="_blank" rel="noopener noreferrer">vue-cli多页面打包配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>;</li></ul><h2 id="简介"><a href="#简介" aria-hidden="true" class="header-anchor">#</a> 简介</h2><h3 id="vue（读音同view）"><a href="#vue（读音同view）" aria-hidden="true" class="header-anchor">#</a> Vue（读音同view）</h3><ul><li>概念：聚焦View层，基于数据驱动和组件化理念的Web MVVM库;</li><li>优点：轻量（体积小、不依赖其它库）、数据绑定、指令（同Angular理念）、组件化和虚拟dom（同React理念）;</li><li>渐进式技术栈：学习坡度平缓，语法亲和力强，项目既可以只使用vue核心（视图和组件），也可以使用vue生态圈（vue-router、vuex等）技术构建中型项目，相比angular这种体系大、规范强硬的框架上手会更快;</li></ul><h3 id="vue和其它同类框架的区别"><a href="#vue和其它同类框架的区别" aria-hidden="true" class="header-anchor">#</a> Vue和其它同类框架的区别</h3><ul><li>与Angular：
<ul><li>相同：指令、过滤器、双向绑定、不支持低端浏览器;</li><li>不同：ng学习成本高（比如：依赖注入机制...），Vue的API等比较简单直观，ng对数据赃检查所以watcher越多越慢，Vue使用异步队列更新（所有数据独立触发）所以优化比较好;</li></ul></li><li>与React：
<ul><li>相同：思想相同（一切都是组件），钩子函数（让开发者定制化处理需求），不内置类似Ajax、Router等功能到核心包，而是以其它方式加载组件开发中，都支持mixins特性;</li><li>不同：React依赖虚拟DOM，对渲染的结果会做脏检查，而Vue使用DOM模版，Vue提供了指令、过滤器等可以方便快捷的操作DOM;</li></ul></li></ul><h2 id="常用api"><a href="#常用api" aria-hidden="true" class="header-anchor">#</a> 常用api</h2><h3 id="属性"><a href="#属性" aria-hidden="true" class="header-anchor">#</a> 属性</h3><ul><li>el: vue实例挂载目标，用于vue编译模版，数据和事件监听的覆盖范围;</li><li>data：用于vue初始化监听的数据对象，需要手动触发后续改动;</li><li>computed: 用于vue初始化时混入实例的计算属性，只有当计算属性依赖的其它响应式属性改变才会更新，否则会取缓存数据，计算属性不能手动被改变;</li><li>watch：用于vue初始化时，定义需要观察的表达式，当观察属性变化时触发回掉，可利用此观察属性来更新其它变量;</li><li>methods: 初始化混入到vue实例中的方法，需要手动调用;</li></ul><h3 id="常用指令和特殊属性"><a href="#常用指令和特殊属性" aria-hidden="true" class="header-anchor">#</a> 常用指令和特殊属性</h3><ul><li>v-html、v-show、v-if、v-else、v-else-if、v-for、v-on（@）、v-bind（:）、v-model;</li><li>key、ref、slot、slot-scope;</li></ul><h3 id="组件"><a href="#组件" aria-hidden="true" class="header-anchor">#</a> 组件</h3><ul><li>作用：用于拆分项目，减少项目代码，封装可复用组件，便于维护，使项目结构清晰;</li><li>注意：组件data必须是函数（函数返回的对象是新生成的可被独立维护的对象，不会和其它实例共享避免互相影响）;</li><li>组件间的交互方式：父子间通过<code>props</code>和<code>$emit</code>传递数据，非父子组件间通过<code>vm.$on</code>和<code>vm.$emit</code>传递数据;</li></ul><h3 id="slot"><a href="#slot" aria-hidden="true" class="header-anchor">#</a> slot</h3><ul><li>作用：用于组件内容分发（自定义内容）;</li><li>种类：
<ul><li>基本slot（完全代理内容分发）;</li><li>具名slot（指定位置内容分发）;</li><li>作用域slot（解构 slot-scope 获取组件内数据）;</li></ul></li></ul><h3 id="vue-set和vm-set"><a href="#vue-set和vm-set" aria-hidden="true" class="header-anchor">#</a> Vue.set和vm.$set</h3><ul><li>作用：用于vue初始化后，需要新增的响应式属性（被监听，且视图更新），因为vue本身无法监听普通的深度新增属性（对象和数组）;</li></ul><h3 id="vue-nexttick和vm-nexttick"><a href="#vue-nexttick和vm-nexttick" aria-hidden="true" class="header-anchor">#</a> Vue.nextTick和vm.$nextTick</h3><ul><li>作用：下一次的 dom 更新事件循环完成后触发回调，可用于需要在数据更新后，获取dom最新的真实状态（例如列表数据更新后需要获取更新后列表容器的实际高度）的场景;</li></ul><h3 id="vue-router"><a href="#vue-router" aria-hidden="true" class="header-anchor">#</a> vue-router</h3><ul><li>作用：用于单页面应用无刷新页面跳转;</li><li>基本配置：熟悉 path、name、components、children、redirect 配置的作用;</li><li>标签使用：熟悉 router-link 和 router-view 常用配置;</li><li>js功能：熟悉路由周期函数（beforeRouteEnter、beforeRouteLeave），熟悉$router api;</li></ul><h3 id="vuex（项目内部通过store、-store访问）"><a href="#vuex（项目内部通过store、-store访问）" aria-hidden="true" class="header-anchor">#</a> vuex（项目内部通过store、$store访问）</h3><ul><li>作用：一个 vue 应用的全局状态管理系统，方便应用中所有组件都能快速获取全局的状态改变，而不需要通过组件之间一层层传递;</li><li>api：
<ul><li>state：单纯的数据状态数据存储对象;</li><li>getters：需要动态计算的状态数据;</li><li>mutations：用于改变state状态的唯一提交方法，只支持同步;</li><li>actions：用于提交mutation，支持异步;</li><li>modules：用于将大型应用store分割成子模块，便于模块内部管理自己的状态;</li></ul></li></ul><h2 id="项目构建"><a href="#项目构建" aria-hidden="true" class="header-anchor">#</a> 项目构建</h2><h3 id="runtime-only-和-runtime-compiler区别"><a href="#runtime-only-和-runtime-compiler区别" aria-hidden="true" class="header-anchor">#</a> runtime only 和 runtime + compiler区别</h3><ul><li>runtime only：vue渲染最终通过render，选择此模式只能通过render函数渲染vue页面，不能采用template，因为template需要编译，而通常vue文件是通过vue-loader进行编译的，但是在main.js中new Vue时必须采用render，此方式生成的代码更轻量，因为没有加入编译过程代码;</li><li>runtime + compiler：自带编译器，但是编译过程消耗资源和性能，所以通常推荐采用 runtime only 模式;</li></ul><h2 id="原理-2-5-16"><a href="#原理-2-5-16" aria-hidden="true" class="header-anchor">#</a> 原理(2.5.16)</h2><h3 id="vue入口"><a href="#vue入口" aria-hidden="true" class="header-anchor">#</a> vue入口</h3><ul><li>调用全局函数 <code>initGlobalAPI()</code> 初始化Vue全局api;
<ul><li><code>Object.defineProperty(Vue, 'config', configDef)</code>：初始化<code>Vue.config</code>上的全局配置属性，例如：devtools、silent等属性;</li><li>初始化<code>Vue.set</code>、<code>Vue.delete</code>、<code>Vue.nextTick</code>等方法;</li><li>初始化<code>Vue.options</code>上的属性，例如：<code>components</code>、<code>directives</code>、<code>filters</code>，然后<code>Vue.options._base = Vue</code>挂载<code>Vue</code>给<code>_base</code>属性，然后<code>extend(Vue.options.components, builtInComponents)</code>将<code>builtInComponents</code>中的组件<code>KeepAlive</code>初始化继承到<code>Vue.options.components</code>对象中;</li><li><code>initUse(Vue)</code>初始化<code>Vue.use</code>方法的功能;</li><li><code>initMixin(Vue)</code>初始化<code>Vue.mixin</code>方法的功能;</li><li><code>initExtend(Vue)</code>初始化<code>Vue.extend</code>方法的功能;</li><li><code>initAssetRegisters(Vue)</code>初始化<code>Vue.component</code>、<code>Vue.directive</code>、<code>Vue.filter</code>方法的功能;</li></ul></li></ul><h3 id="new-vue-做了什么"><a href="#new-vue-做了什么" aria-hidden="true" class="header-anchor">#</a> new Vue()做了什么</h3><ul><li>在<code>Vue</code>构造函数中通过<code>this._init(options)</code>初始化vue实例数据;
<ul><li><code>initLifecycle(vm)</code></li><li><code>initEvents(vm)</code></li><li><code>initRender(vm)</code></li><li><code>callHook(vm, 'beforeCreate')</code>触发生命周期回调;</li><li><code>initInjections(vm)</code></li><li><code>initState(vm)</code>初始化实例的<code>props、methods、data、computed、watch</code>等属性;
<ul><li><code>initProps(vm, opts.props)</code>;</li><li><code>initMethods(vm, opts.methods)</code>;</li><li><code>initData(vm)</code>;
<ul><li>遍历<code>vm._data</code>的属性，通过<code>proxy(vm, '_data', key)</code>代理<code>vm._data</code>上所有数据get和set，使直接操作vm上的属性可触发<code>vm._data</code>上同名属性的set和get达到挂载属性改变被监听的目的;</li></ul></li><li><code>initComputed(vm, opts.computed)</code>;</li><li><code>initWatch(vm, opts.watch)</code>;</li></ul></li><li><code>initProvide(vm)</code></li><li><code>callHook(vm, 'created')</code>触发<code>created</code>回调;</li><li><code>vm.$mount(vm.$options.el)</code>挂载<code>el</code>元素，<code>$mount</code>的定义在源码 <code>entry-runtime-with-compiler.js</code>，此模式是带编译的版本;
<ul><li><p><code>const mount = Vue.prototype.$mount</code>先缓存<code>runtime</code>非编译版本的<code>mount</code>方法，留着后面用，然后重新在Vue原型上定义新的<code>$mount</code>方法；</p></li><li><p><code>el = el &amp;&amp; query(el)</code>获取元素；</p></li><li><p><code>if (el === document.body || el === document.documentElement)</code>判断避免直接挂载在根元素上，因为后面会替换掉自身;</p></li><li><p><code>if (!options.render)</code>如果没有自定义<code>render</code>，则取<code>options.template</code>然后获取模板HTML，</p></li><li><p>通过<code>compileToFunctions</code>方法将<code>template</code>编译成<code>render</code>函数;</p></li><li><p>调用开始缓存的<code>mount</code>方法挂载<code>el</code>，<code>mount</code>中通过<code>mountComponent(this, el, hydrating)</code>挂载组件;</p></li><li><p>在<code>mountComponent</code>中，通过<code>vm.$el = el</code>将<code>el</code>挂载到<code>$el</code>上;</p></li><li><p><code>callHook(vm, 'beforeMount')</code>触发生命周期回调;</p></li><li><p>定义 <code>updateComponent</code>方法，此方法内通过调用<code>vm._render()</code>获取虚拟dom，然后通过<code>vm._update</code>方法传递虚拟dom来更新真实的dom，然后<code>new Watcher</code>监听视图更新，需要更新时调用<code>updateComponent</code>;</p><ul><li><code>vm._render</code>中通过<code>vnode = render.call(vm._renderProxy, vm.$createElement)</code>获取虚拟dom节点，<code>vm.$createElement</code>是创建虚拟dom的方法;
<ul><li><code>$createElement</code>中判断非原生标签，则通过<code>createComponent</code>方法创建组件的虚拟dom；</li><li><code>createComponent</code>中通过<code>baseCtor.extend(Ctor)</code>继承构造器（extend在源码<code>core\global-api\extend.js</code>中）；</li></ul></li><li><code>vm._update</code>方法中通过<code>vm.__patch__</code>初始化或更新dom；<code>__patch__</code>在源码<code>runtime/index.js</code>中定义，</li><li><code>patch</code>方法（在源码<code>core\vdom\patch.js</code>）中通过<code>createElm</code>方法将虚拟dom转化为真实dom，<code>createElm</code>方法中通过<code>nodeOps.createElement</code>（内部通过<code>document.createElement</code>原生方法创建dom），然后通过<code>createChildren</code>方法递归子虚拟dom，最后通过<code>insert</code>方法插入dom；</li></ul></li><li><p><code>Watcher</code>中的<code>before</code>钩子中通过<code>callHook(vm, 'beforeUpdate')</code>触发生命周期函数;</p></li><li><p><code>callHook(vm, 'mounted')</code>触发生命周期回调，最后返回vue实例;</p></li></ul></li></ul></li></ul><h3 id="虚拟dom"><a href="#虚拟dom" aria-hidden="true" class="header-anchor">#</a> 虚拟DOM</h3><ul><li>产生原生：js中操作dom效率低下，因为浏览器所构建的dom设计非常复杂，整个dom树体系庞大，频繁操作 dom 影响性能；前端主要任务就是维护状态和更新视图，必定会需要大量的操作dom，所以很容易降低渲染效率;</li><li>核心思想：提供一种方便的工具，保证最小化的 dom 操作，提高视图渲染效率;</li><li>核心实现：JS对象操作比 dom 操作效率快，所以对 dom 的改变，首先并不会真正的操作实际 dom，而是会通过虚拟dom（即模拟dom结构的js对象）进行属性对比后确认真正改变的属性，再对真实的 dom 进行操作;</li></ul><h2 id="bug"><a href="#bug" aria-hidden="true" class="header-anchor">#</a> bug</h2><h3 id="vuex不兼容ie-例如：promise”未定义、或vuex报错vuex-requires-a-promise-polyfill-in-this-browser"><a href="#vuex不兼容ie-例如：promise”未定义、或vuex报错vuex-requires-a-promise-polyfill-in-this-browser" aria-hidden="true" class="header-anchor">#</a> vuex不兼容IE(例如：Promise”未定义、或vuex报错vuex requires a Promise polyfill in this browser)</h3><ul><li>在代码执行之前，引入 babel-polyfill;</li></ul><h3 id="属性赋值对视图渲染无效"><a href="#属性赋值对视图渲染无效" aria-hidden="true" class="header-anchor">#</a> 属性赋值对视图渲染无效</h3><ul><li>初始化data时未追加，可通过<code>Vue.set</code>或<code>this.$set</code>方法修改数据避免；</li><li>子组件不规范（未通过sync修饰符）的操作父组件通过 props 传递的数据，应尽量避免子组件过多操作props数据;</li></ul><h3 id="error-in-nexttick-invalidcharactererror-failed-to-execute-setattribute-on-element-is-not-a-valid-attribute-name"><a href="#error-in-nexttick-invalidcharactererror-failed-to-execute-setattribute-on-element-is-not-a-valid-attribute-name" aria-hidden="true" class="header-anchor">#</a> Error in nextTick: &quot;InvalidCharacterError: Failed to execute 'setAttribute' on 'Element': '}' is not a valid attribute name.&quot;</h3><ul><li>类似这种错误，一般是由于html模板中，自已在元素属性上加了vue无法识别的属性名，比如上面的报错中是不识别 '}' 说明模板中有误写了 '}' 到属性中;</li></ul><h3 id="cannot-read-property-withtask-of-undefined："><a href="#cannot-read-property-withtask-of-undefined：" aria-hidden="true" class="header-anchor">#</a> Cannot read property '_withTask' of undefined：</h3><ul><li>常因为vue template中绑定的数据或方法，没有在实例中的对应属性中写入而产生;</li></ul><h3 id="no-parser-and-no-file-path-given-couldn-t-infer-a-parser"><a href="#no-parser-and-no-file-path-given-couldn-t-infer-a-parser" aria-hidden="true" class="header-anchor">#</a> No parser and no file path given, couldn't infer a parser</h3><ul><li>由于 prettier 模块版本过高导致，prettier 是 &quot;vue-loader&quot; 的依赖，把 vue-loader 降级成 &quot;12.2.2&quot; 可解决;</li></ul><h3 id="新的-vue-cli-项目中-webpack-dev-server-高版本babel编译不了导致ie报错："><a href="#新的-vue-cli-项目中-webpack-dev-server-高版本babel编译不了导致ie报错：" aria-hidden="true" class="header-anchor">#</a> 新的 vue-cli 项目中 webpack-dev-server 高版本babel编译不了导致IE报错：</h3><ul><li>降版本 &quot;webpack-dev-server&quot;: &quot;2.6.1&quot;;</li></ul></div><div class="content edit-link"><!----><!----></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/blog/senior/jquery.html" class="prev">
          所见所闻之jquery
        </a></span><!----></p></div></div></div></div>
    <script src="/blog/assets/js/0.ea1d744c.js" defer></script><script src="/blog/assets/js/app.09674728.js" defer></script>
  </body>
</html>
